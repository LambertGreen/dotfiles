#!/usr/bin/env just
# -*- mode: just -*-

# Windows dotfiles stowing by level
# Levels: basic (shell), typical (terminal apps), max (GUI apps)

import 'justfile_common'

# =============================================================================
# WINDOWS-SPECIFIC PACKAGE LISTS
# =============================================================================

# Basic Windows packages (shell environment + MSYS2)
win_basic_packages := "package_management_win git_win shell_msys2 gnupg_win mintty tmux_msys2"

# Typical Windows packages (terminal apps)
win_typical_packages := "alacritty_win cursor_win clink powershell_win nvim_win"

# Max Windows packages (GUI apps)
win_max_packages := "autohotkey emacs_win_wsl Keypirinha keypirinha_choco vscode_win vsvim win_wsl WindowsCommand WindowsPowerShell"

_default:
    @just -f justfile_win --list

# =============================================================================
# üî∞ BASIC LEVEL - Shell environment essentials + MSYS2
# =============================================================================

# üî∞ Stow basic Windows configs (shell environment + MSYS2)
stow-basic:
    @echo "üîó Stowing basic Windows configs (shell environment + MSYS2)..."
    just -f justfile_common _remove-conflicting-shell-configs
    just -f justfile_common _stow-basic-common
    stow {{win_basic_packages}}

# =============================================================================
# üî∂ TYPICAL LEVEL - Basic + terminal applications
# =============================================================================

# üî∂ Stow typical Windows configs (basic + terminal applications)
stow-typical: stow-basic
    @echo "üîó Stowing typical Windows configs (+ terminal apps)..."
    just -f justfile_common _stow-typical-common
    stow {{win_typical_packages}}

# =============================================================================
# üî∏ MAX LEVEL - Typical + GUI applications
# =============================================================================

# üî∏ Stow max Windows configs (typical + GUI applications)
stow-max: stow-typical
    @echo "üîó Stowing max Windows configs (+ GUI apps)..."
    just -f justfile_common _stow-max-common
    stow {{win_max_packages}}

# =============================================================================
# MANAGEMENT COMMANDS
# =============================================================================

# üóëÔ∏è Remove all stowed Windows configs
unstow-all:
    @echo "üóëÔ∏è Unstowing all Windows configs..."
    @_unstow-win-all

_unstow-win-all:
    # Use common unstow functions
    just -f justfile_common _unstow-max-common
    just -f justfile_common _unstow-typical-common
    just -f justfile_common _unstow-basic-common
    # Windows-specific packages
    - stow -D {{win_basic_packages}}
    - stow -D {{win_typical_packages}}
    - stow -D {{win_max_packages}}

# üì¶ Show what packages are included at each level
list-packages:
    @echo "üì¶ Windows Package Organization:"
    @echo ""
    just -f justfile_common _list-common-packages
    @echo ""
    @echo "üè† WINDOWS-SPECIFIC ADDITIONS:"
    @echo "  Basic: {{win_basic_packages}}"
    @echo "  Typical: {{win_typical_packages}}"
    @echo "  Max: {{win_max_packages}}"
