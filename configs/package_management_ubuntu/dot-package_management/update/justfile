#!/usr/bin/env just
# -*- mode: just -*-

# Justfile for Linux system-level maintenance tasks
# This file assumes the use of APT (e.g. Ubuntu, Debian)
# Other distros should use their respective package manager

import 'justfile_common'
import 'justfile_posix'
import 'justfile_dev_common'

# * Default
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
default:
    @just --list

# * APT
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# @category Apt

# ğŸ” Check for APT package updates
apt-check:
    @echo "ğŸ” Checking for APT updates..."
    sudo apt update --quiet

# ğŸ“¦ Upgrade APT packages
apt-upgrade:
    @echo "ğŸ“¦ Upgrading APT packages..."
    sudo apt upgrade -y

# ğŸ›‚ Clean up APT cache and obsolete packages
apt-clean:
    @echo "ğŸ›‚ Cleaning APT cache..."
    sudo apt autoremove -y
    sudo apt clean

# * System
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# @category System

# ğŸ” Preview system updates
system-check: brew-check apt-check

# ğŸ› ï¸ Fast weekly update
system-upgrade: apt-upgrade brew-upgrade completions-upgrade

# ğŸ§¹ Clean system caches (APT & Homebrew)
system-clean: apt-clean brew-clean

# ğŸ§¹ğŸ› ï¸ Monthly deep maintenance (composed of upgrade + clean)
system-maintain: system-upgrade system-clean zinit-upgrade emacs-upgrade
