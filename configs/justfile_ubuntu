#!/usr/bin/env just
# -*- mode: just -*-

# Ubuntu Linux dotfiles stowing by level
# Levels: basic (shell), typical (terminal apps), max (GUI apps)

import 'justfile_common'

default:
    @echo "üêß Ubuntu Linux Stowing Recipes"
    @echo ""
    @echo "Levels:"
    @echo "  just stow-basic    - Shell environment essentials"
    @echo "  just stow-typical  - Basic + terminal applications" 
    @echo "  just stow-max      - Typical + GUI applications"
    @echo ""
    @echo "Management:"
    @echo "  just unstow-all    - Remove all stowed configs"
    @echo "  just list-packages - Show what gets stowed at each level"

# =============================================================================
# BASIC LEVEL - Shell environment essentials
# =============================================================================
stow-basic:
    @echo "üîó Stowing basic Ubuntu configs (shell environment)..."
    just -f justfile_common _remove-conflicting-shell-configs
    just -f justfile_common _stow-basic-common
    stow package_management_ubuntu
    stow package_management_posix
    stow git_linux
    stow shell_linux

# =============================================================================
# TYPICAL LEVEL - Basic + terminal applications  
# =============================================================================
stow-typical: stow-basic
    @echo "üîó Stowing typical Ubuntu configs (+ terminal apps)..."
    just -f justfile_common _stow-typical-common
    stow gnupg_linux

# =============================================================================
# MAX LEVEL - Typical + GUI applications
# =============================================================================
stow-max: stow-typical
    @echo "üîó Stowing max Ubuntu configs (+ GUI apps)..."
    just -f justfile_common _stow-max-common
    stow xdg-autostart
    stow xdg-desktop

# =============================================================================
# MANAGEMENT COMMANDS
# =============================================================================

# Remove all stowed configs
unstow-all:
    @echo "üóëÔ∏è Unstowing all Ubuntu configs..."
    @_unstow-ubuntu-all

_unstow-ubuntu-all:
    # Use common unstow functions
    just -f justfile_common _unstow-max-common
    just -f justfile_common _unstow-typical-common
    just -f justfile_common _unstow-basic-common
    # Ubuntu-specific packages
    -stow -D package_management_ubuntu
    -stow -D package_management_posix
    -stow -D git_linux
    -stow -D shell_linux
    -stow -D gnupg_linux
    -stow -D xdg-autostart
    -stow -D xdg-desktop

# Show what packages are included at each level
list-packages:
    @echo "üì¶ Ubuntu Linux Package Organization:"
    @echo ""
    just -f justfile_common _list-common-packages
    @echo ""
    @echo "üè† UBUNTU-SPECIFIC ADDITIONS:"
    @echo "  - package_management_ubuntu, package_management_posix, git_linux, shell_linux, gnupg_linux"
    @echo "  - xdg-autostart, xdg-desktop"