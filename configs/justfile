#!/usr/bin/env just
# -*- mode: just -*-

# Machine class-aware dotfiles stowing
# Executable documentation for what gets stowed per machine class

_default:
    @echo "üîó Machine Class-Aware Stowing"
    @echo ""
    @echo "Examples:"
    @echo "  just stow-laptop-personal-mac"
    @echo "  just stow-laptop-work-mac"
    @echo "  just stow-docker-ubuntu-essential"
    @echo ""
    @just --list

# =============================================================================
# DOCKER MACHINE CLASSES
# =============================================================================

# Docker Arch Linux essential (pacman + homebrew)
stow-docker-arch-essential:
    @echo "üèõÔ∏è Stowing docker_essential_arch configs..."
    @just _stow-common-essential
    @just _stow-linux

# Docker Arch Linux developer (pacman + AUR + homebrew + npm + pip)
stow-docker-arch-developer:
    @echo "üèõÔ∏è Stowing docker_developer_arch configs..."
    @just _stow-common-developer
    @just _stow-linux

# Docker Ubuntu essential (apt + homebrew)
stow-docker-ubuntu-essential:
    @echo "üêß Stowing docker_essential_ubuntu configs..."
    @just _stow-common-essential
    @just _stow-linux

# Docker Ubuntu developer (apt + homebrew + npm + pip)
stow-docker-ubuntu-developer:
    @echo "üêß Stowing docker_developer_ubuntu configs..."
    @just _stow-common-developer
    @just _stow-linux

# =============================================================================
# LAPTOP MACHINE CLASSES
# =============================================================================

# Personal Mac laptop (brew + mas + npm + pip + gem)
stow-laptop-personal-mac:
    @echo "üçé Stowing laptop_personal_mac configs..."
    @just _stow-common-developer
    @just _stow-personal
    @just _stow-osx

# Work Mac laptop (brew + npm + pip)
stow-laptop-work-mac:
    @echo "üçé Stowing laptop_work_mac configs..."
    @just _stow-common-developer
    @just _stow-work
    @just _stow-osx

# =============================================================================
# DESKTOP MACHINE CLASSES
# =============================================================================

# Gaming Windows desktop
stow-desktop-gaming-win:
    @echo "ü™ü Stowing desktop_gaming_win configs..."
    @just _stow-common-developer
    @just _stow-gaming
    @just _stow-windows

# Home Ubuntu desktop
stow-desktop-home-ubuntu:
    @echo "üêß Stowing desktop_home_ubuntu configs..."
    @just _stow-common-developer
    @just _stow-personal
    @just _stow-linux

# =============================================================================
# WSL MACHINE CLASSES
# =============================================================================

# Work Ubuntu WSL (apt + homebrew + npm + pip)
stow-wsl-work-ubuntu:
    @echo "üêß Stowing wsl_work_ubuntu configs..."
    @just _stow-common-developer
    @just _stow-work
    @just _stow-linux

# =============================================================================
# WINDOWS MACHINE CLASSES
# =============================================================================

# Windows ARM64 development (MSYS2 pacman + scoop)
stow-windows-arm64-dev:
    @echo "ü™ü Stowing vm_dev_windows_arm64 configs..."
    @just _stow-common-developer
    @just _stow-windows

# =============================================================================
# CONFIGURATION PROFILES
# =============================================================================

# Essential common configs (shell, git, basic tools, terminal)
[private]
_stow-common-essential:
    cd common && stow --dotfiles --target="$HOME" git git_my shell tmux vim wezterm spelling

# Developer common configs (essential + dev tools + terminal)
[private]
_stow-common-developer:
    cd common && stow --dotfiles --target="$HOME" git git_my shell tmux vim wezterm spelling ripgrep

# Personal machine additions
[private]
_stow-personal:
    @echo "üì± Adding personal configs..."
    # Add personal-specific configs if needed

# Work machine additions
[private]
_stow-work:
    @echo "üíº Adding work configs..."
    # Add work-specific configs if needed

# Gaming machine additions
[private]
_stow-gaming:
    @echo "üéÆ Adding gaming configs..."
    # Add gaming-specific configs if needed

# =============================================================================
# PLATFORM-SPECIFIC CONFIGURATIONS
# =============================================================================

# macOS platform configs
[private]
_stow-osx:
    @if [ -d "../osx_only" ]; then \
        echo "üîó Stowing macOS-specific configs..."; \
        cd ../osx_only && stow --dotfiles --target="$HOME" *; \
    fi

# Linux platform configs
[private]
_stow-linux:
    @if [ -d "../linux_only" ]; then \
        echo "üîó Stowing Linux-specific configs..."; \
        cd ../linux_only && stow --dotfiles --target="$HOME" *; \
    fi

# Windows platform configs
[private]
_stow-windows:
    @if [ -d "../windows_only" ]; then \
        echo "üîó Stowing Windows-specific configs..."; \
        cd ../windows_only && stow --dotfiles --target="$HOME" *; \
    fi