#!/usr/bin/env just
# -*- mode: just -*-

# Common stowing recipes shared across platforms
# This file contains common functionality used by platform-specific justfiles

# =============================================================================
# COMMON PACKAGE LISTS
# =============================================================================

# Basic packages (shell environment essentials)
basic_packages := "package_management git git_my shell tmux just"

# Typical packages (basic + terminal applications)
typical_packages := "ctags email fd flake8 fortune gdb htop lldb ripgrep spelling vim nvim finicky nix"

# Max packages (typical + GUI applications) 
max_packages := "wezterm idea XWindows"

# =============================================================================
# COMMON HELPER FUNCTIONS
# =============================================================================

# Remove existing shell configs that would conflict with stow
_remove-conflicting-shell-configs:
    @echo "ðŸ§¹ Removing conflicting shell configs..."
    -rm -f ~/.bashrc ~/.bash_profile ~/.zshrc ~/.zprofile ~/.profile 2>/dev/null

# Stow basic packages common to all platforms
_stow-basic-common:
    stow {{basic_packages}}

# Stow typical packages common to all platforms  
_stow-typical-common:
    stow {{typical_packages}}
    stow --ignore='dot-emacs\.doom' emacs

# Stow max packages common to all platforms
_stow-max-common:
    stow {{max_packages}}


# =============================================================================
# COMMON PACKAGE LISTS (for documentation)
# =============================================================================

# Show common packages at each level
_list-common-packages:
    @echo "ðŸ“¦ Common Package Organization:"
    @echo ""
    @echo "ðŸ”° BASIC (shell environment):"
    @echo "  - {{basic_packages}}"
    @echo ""
    @echo "ðŸ”¶ TYPICAL (basic + terminal apps):"
    @echo "  - {{typical_packages}}"
    @echo "  - emacs (with special ignore flag)"
    @echo ""
    @echo "ðŸ”¸ MAX (typical + GUI apps):"
    @echo "  - {{max_packages}}"